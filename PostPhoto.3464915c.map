{"version":3,"sources":["PostPhoto.js"],"names":["postPhotoMutation","UpdatePhotos","state","result","history","replaceState","route","match","allPhotos","postPhoto","ErrorResponse","error","event","preventDefault","name","description","category","file","input","setNameValue","ev","target","value","setDescriptionValue","setCategoryValue","setFileValue","files","length","historyBack","back","display","flexDirection","justifyContent","alignItems","message","margin"],"mappings":"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","file":"PostPhoto.3464915c.map","sourceRoot":"../src","sourcesContent":["import { h } from 'hyperapp';\nimport { RequestGraphql } from './effects';\n\nconst postPhotoMutation = `\n\tmutation postPhoto($input: PostPhotoInput!) {\n\t\tpostPhoto(input:$input) {\n\t\t\tid\n\t\t\tname\n\t\t\turl\n\t\t}\n\t}\n`;\n\nconst UpdatePhotos = (state, result) => {\n\thistory.replaceState('', 'title', '/');\n\treturn{\n\t\t...state,\n\t\troute:{ \n\t\t\t...state.route,\n\t\t\tmatch: '/' // ou retour sur state.match, c.a.d. postPhoto\n\t\t},\n\t\tallPhotos: [...state.allPhotos, result.postPhoto]\n\t};\n};\n\nconst ErrorResponse = (state, error) => ({ ...state, error });\n\nconst postPhoto = (state, event) => {\n\tevent.preventDefault();\n\tconst postPhoto = state.postPhoto;\n\treturn [\n\t\t{\n\t\t\t...state,\n\t\t\terror: null,\n\t\t\tpostPhoto: { name: '', description: '', category: 'PORTRAIT', file: null },\n\t\t},\n\t\t<RequestGraphql query={postPhotoMutation} variables={{ input: postPhoto }} action={UpdatePhotos} error={ErrorResponse} />\n\t];\n};\n\nconst setNameValue = (state, ev) => ({\n\t...state,\n\tpostPhoto: {\n\t\t...state.postPhoto,\n\t\tname: ev.target.value\n\t}\n});\n\nconst setDescriptionValue = (state, ev) => ({\n\t...state,\n\tpostPhoto: {\n\t\t...state.postPhoto,\n\t\tdescription: ev.target.value\n\t}\n});\n\nconst setCategoryValue = (state, ev) => ({\n\t...state,\n\tpostPhoto: {\n\t\t...state.postPhoto,\n\t\tcategory: ev.target.value\n\t}\n});\n\nconst setFileValue = (state, ev) => {\n\tconst file = ev.target.files && ev.target.files.length ? ev.target.files[0] : '';\n\treturn {\n\t\t...state,\n\t\tpostPhoto: {\n\t\t\t...state.postPhoto,\n\t\t\tfile\n\t\t}\n\t};\n};\n\n\nconst historyBack = (state, event) => {\n\tevent.preventDefault();\n\thistory.back();\n};\n\nexport default ({ postPhoto: { name, description, category }, error }) => \n\t<form onSubmit={postPhoto} style={{ display: 'flex' , flexDirection: 'column' , justifyContent: 'flex-start' , alignItems: 'flex-start' }}>\n\t\t{error ? <h4>{`Error: ${error.message}`}</h4> : ''}\n\t\t<h1>Post a Photo</h1>\n\t\t<input type=\"text\" style={{ margin: '10px' }} placeholder=\"photo name...\" value={name} onChange={setNameValue} />\n\t\t<textarea style={{ margin: '10px' }} placeholder=\"photo description...\" value={description} onChange={setDescriptionValue} />\n\t\t<select value={category}\n\t\t\tstyle={{ margin: '10px' }}\n\t\t\tonChange={setCategoryValue}>\n\t\t\t<option value=\"PORTRAIT\">PORTRAIT</option>\n\t\t\t<option value=\"LANDSCAPE\">LANDSCAPE</option>\n\t\t\t<option value=\"ACTION\">ACTION</option>\n\t\t\t<option value=\"GRAPHIC\">GRAPHIC</option>\n\t\t</select>\n\t\t<input type=\"file\"\n\t\t\tstyle={{ margin: '10px' }}\n\t\t\taccept=\"image/jpeg\"\n\t\t\tonChange={setFileValue} />\n\t\t<div style={{ margin: '10px' }}>\n\t\t\t<button type=\"submit\">\n\t\t\t\tPost Photo\n\t\t\t</button>\n\t\t\t<button onClick={historyBack}>\n\t\t\t\tCancel\n\t\t\t</button>\n\t\t</div>\n\t</form>;\n"]}